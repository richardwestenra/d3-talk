<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Developing Dank Datavis with D3.js - Richard Westenra</title>

  <meta name="description" content="Slides from my talk at Uncodebar, October 2015">
  <meta name="author" content="Richard Westenra">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/custom.css" id="theme">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
  var link = document.createElement( 'link' );
  link.rel = 'stylesheet';
  link.type = 'text/css';
  link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
  document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>

<!--[if lt IE 9]>
<script src="lib/js/html5shiv.js"></script>
<![endif]-->
</head>

<body>

  <div class="reveal">

    <div class="slides">
      <section>
        <h1 class="title">
          <b>Developing dank datavis</b> <span>with</span> <b>d3.js</b></h1>
        <br>
        <p><a href="http://richardwestenra.com">Richard Westenra</a></p>
        <p>
          <small><a href="http://twitter.com/richardwestenra">twitter.com/richardwestenra</a> &nbsp;&nbsp;•&nbsp;&nbsp; <a href="http://github.com/richardwestenra">github.com/richardwestenra</a></small>
        </p>
        <aside class="notes">
          <p>Hey, I’m Richard. I’m a front-end developer and interactive designer on the creative team at Distilled. We make JavaScript data-visualisations, and interactive gubbins.</p>
          <p>We make JavaScript data-visualisations, and interactive gubbins.</p>
          <p>We're basically Buzzfeed for hire.</p>
        </aside>
      </section>
<!--
      <section data-background="img/portfolio.jpg">
        <aside class="notes">
        </aside>
      </section>
 -->
      <section>
        <p>But first, let's discuss</p>
        <h1>what not to do</h1>
        <aside class="notes">
          <p></p>
        </aside>
      </section>

      <section data-background="img/tufte.jpg" data-background-size="contain">
      </section>

      <section>
        <h1>1. Data-ink ratio</h1>
      </section>

      <section data-background="img/data2ink.jpg" data-background-size="contain">
      </section>

      <section>
        <h1>2. The lie factor</h1>
        <aside class="notes">
          <p>To talk about graphical integrity, Tufte introduces the concept of the lie-factor. The lie-factor is equal to the size of the effect shown in the graphic divided by the size of effect in data.</p>
        </aside>
      </section>

      <section data-background="img/liefactor.png" data-background-size="contain">
        <aside class="notes">
          <p>So in the image above, it is the change in the size of the line divided by the change in the number the line should represent. In this example, the decision to use perspective corrupts the display and results in a lie-factor of 14.8. The lines simply grow far too fast.</p>
          <p>While this makes for a more dramatic graphic, it misleads the reader. As a reader, you simply look at how the lines have grown and conclude that the fuel economy is not only improving but improving more and more rapidly as the lines get bigger and bigger faster. Tufte replotted the data more truthfully below.</p>
        </aside>
      </section>
<!--
      <section>
        <h1>3. Show, don’t tell</h1>
      </section>
      <section>
        <h1>4. Keep it simple</h1>
      </section>

      <section>
        <h3>Compare:</h3>
        <p><a href="http://www.thomson.co.uk/blog/infographic/rugby/index.html#EngFra04" data-preview-link>Rugby Six Nations Head to Head</a></p>
        <p>vs</p>
        <p><a href="http://www.concerthotels.com/ipod-visualized-as-vinyl" data-preview-link>An iPod visualised as Vinyl</a></p>
      </section>
 -->

      <section data-background="img/d3.jpg" data-background-size="contain">
        <aside class="notes">
          <p>d3 is very powerful and flexible, but has a steep learning curve and requires bit more setup compared to libraries like Highcharts.</p>
        </aside>
      </section>

      <section>
        <h1>Working with data</h1>
      </section>

      <section>
        <h1>Importing data</h1>
        <pre><code>
var data; // a global

d3.csv('path/to/file.csv', function(error, json) {
  if (error) {
    return console.warn(error);
  }
  data = json;
  visualizeit();
});
        </code></pre>
        <p>Works for JSON, CSV, TSV, XML, HTML, text, etc.</p>
        <p><small>See <a href="https://github.com/mbostock/d3/wiki/Requests">github.com/mbostock/d3/wiki/Requests</a></small></p>
        <aside class="notes">
          <p>Use CSV/TSV or JSON depending on data size</p>
          <p>Make your data as compact as possible then format it in JS to make it prettier.</p>
          <p>CSV is untyped, so coercion from strings is required.</p>
          <p>Asynchronous. Code that depends on data must be invoked via callback.</p>
        </aside>
      </section>

      <section>
        <h1>Format your data before using it</h1>
        <aside class="notes">
          <p>Clean up the data before attaching it to objects, not the other way around.</p>
          <p>Avoid DOM operations</p>
          <p>JavaScript has a number of useful built-in array methods: Array.map, Array.filter, Array.sort, Array.reduce, etc. If you need more, D3 also has a variety of data-transform methods. ALso try Underscore or Lo-dash.</p>
          <p>Bind as much data to an element as possible in order to make it more flexible.</p>
        </aside>
      </section>


      <section>
        <h1>Selections</h1>
        <pre><code>
d3.select('ul').selectAll("li")
        </code></pre>
        <aside class="notes">
          <p>Works a bit like jQuery: CSS selectors, chaining, etc.</p>
          <p>Select vs SelectAll</p>
        </aside>
      </section>


      <section>
        <h1>Binding data</h1>
        <pre><code>
d3.select('ul').selectAll("li").data(['foo','bar','baz'])
        </code></pre>
        <aside class="notes">
          <p>Selections are arrays</p>
        </aside>
      </section>

      <section>
        <pre><code>
d3.select('ul')
  .selectAll('li')
  .data(['foo','bar','baz'])
  .enter()
  .append('li')
  .text(function (d) {
    return d;
  });
        </code></pre>
        <p>will result in:</p>
        <pre><code>
<ul>
  <li>foo</li>
  <li>bar</li>
  <li>baz</li>
</ul>
        </code></pre>
      </section>

      <section data-background-color="#fcfcfa" data-background="img/join.png" data-background-size="contain">
      </section>

      <section>
        <h1>Exit, Enter, update</h1>
        <pre><code>
var circle = svg.selectAll('circle')
  .data(data);

circle.exit().remove();

circle.enter().append('circle')
  .attr('r', 2.5);

circle
  .attr('cx', function(d) { return d.x; })
  .attr('cy', function(d) { return d.y; });
        </code></pre>
      </section>

      <section>
        <h1>Scales</h1>
        <aside class="notes">
          <p>The biggest problem in datavis is converting data units into pixel units. Scale functions take care of this for you.</p>
        </aside>
      </section>

      <section>
        <h1>Input: Domain!</h1>
        <h1>Output: Range!</h1>
        <aside class="notes">
        </aside>
      </section>

      <section>
        <h1>Ordinal versus Quantitative</h1>
      </section>

      <section>
        <h1>Quantitative</h1>
        <pre><code>
var x = d3.scale.linear()
  .domain([12, 24])
  .range([0, 720]);

x(16); // 240
        </code></pre>
        <aside class="notes">
          <p>Quantitative scales map a continuous (numeric) domain to a continuous range (e.g. linear, exponential, logarithmic, etc.</p>
        </aside>
      </section>

      <section>
        <h1>Ordinal</h1>
        <pre><code>
var x = d3.scale.ordinal()
  .domain(['A', 'B', 'C', 'D'])
  .range([0, 10, 20, 30]);

x('B'); // 10
        </code></pre>
        <aside class="notes">
          <p>Ordinal scales map a discrete domain to a discrete range.</p>
        </aside>
      </section>

      <section>
        <h1>Transitions</h1>
        <svg class="chart" id="scales"></svg>
        <aside class="notes">
        </aside>
      </section>

      <section>
        <h1>Transitions</h1>
        <pre><code>
d3.selectAll('li')
  .data([10,20,30,40,50,60])
  .enter()
  .append('li')
  .attr('width',0)
  .transition()
  .duration(600)
  .delay(function (d,i){ return i * 200;})
  .attr('width', function (d){ return d;});
        </code></pre>
      </section>

      <section>
        <h1>Maps</h1>
        <aside class="notes">
          <p>GeoJSON and TopoJSON</p>
          <p>Different projections</p>
        </aside>
      </section>

      <section>
        <h1>Making it work on mobile</h1>
        <aside class="notes">
          <p>Make the design modular, not holistic. Cf. Atomic design</p>
          <p>Don’t use too much processor. Avoid fixed-position animations, background images, etc.</p>
          <p>Use mobile sensors like gyro, accelerometer, etc.</p>
        </aside>
      </section>

      <section>
        <h1></h1>
        <aside class="notes">
        </aside>
      </section>

      <section>
        <h1></h1>
        <aside class="notes">
        </aside>
      </section>

    </div>

  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="lib/js/d3.min.js"></script>
  <script src="js/reveal.js"></script>
  <script src="js/chart.js"></script>

  <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: 'slide', // none/fade/slide/convex/concave/zoom

      // Optional reveal.js plugins
      dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: 'plugin/notes/notes.js', async: true }
      ]
    });
  </script>

</body>
</html>
